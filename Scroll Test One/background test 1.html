<!DOCTYPE html>
<html>
<head>
</head>
<body>
    <canvas id="canvas" width="980" height="730"></canvas>
<script>
    let canvas = document.getElementById("canvas");
    let ctx = canvas.getContext("2d");
    let bgImage = new Image();
    bgImage.src = "backgroundcopy.png";

    let bg1 = {
    width:980,
    height:730,
    x:0,
    y:0
}
    let bg2 = {
    width:980,
    height:730,
    x:980,
    y:0
}
    let bg3 = {
    width:980,
    height:730,
    x:1960,
    y:0
}
let interval = setInterval(function() {
    bg1.x -= 2;
    bg2.x -= 2;
    bg3.x -= 2;
    if (bg1.x + bg1.width <= 0) {
        bg1.x = bg3.x + bg3.width;
    }
    if (bg2.x + bg2.width <= 0) {
        bg2.x = bg1.x + bg1.width;
    }
    if (bg3.x + bg3.width <= 0) {
        bg3.x = bg2.x + bg2.width;
    }
    ctx.drawImage(bgImage, bg1.x, bg1.y);
    ctx.drawImage(bgImage, bg2.x, bg2.y);
    ctx.drawImage(bgImage, bg3.x, bg3.y);
    ctx.drawImage(spiritImg, spirit.x, spirit.y, spirit.width, spirit.height); 
}, 50);

//Sprit//
let spiritWidth = 75;
let spiritHeight = 75;
let spiritX = 75;
let spiritY = 500;
let spiritImg = new Image();
spiritImg.src = "spiritcopy.png";

let spirit = {
    x : spiritX,
    y : spiritY,
    width : spiritWidth,
    height : spiritHeight
} 
//Obstacle//
let obstacleArray = [];
let obstacle1Width = 120;
let obstacle2Width = 115;
let obstacleHeight = 230;
let obstacleX = 980;
let obstacleY = 500;
let obstacle1Img = new Image();
obstacle1Img.src = "./img/obstacle1.png";
let obstacle2Img = new Image();
obstacle2Img.src = "./img/obstacle2.png";

//Game Physics and Operations//
let velocityX = -8;
let velocityY = 0;
let gravity = .4;

let gameOver = false;
let score = 0;
    requestAnimationFrame(update);
    setInterval(placeObstacle, 1000); //1000 milliseconds = 1 second
    document.addEventListener("keydown", moveSpirit);


function update() { //This will tell the browser that you want to perform an animation// 
    requestAnimationFrame(update);
    if (gameOver) {
            return;
    }
    velocityY += gravity;
    spirit.y = Math.min(spirit.y + velocityY, spiritY); // Applies gravity to spirit
}
function moveSpirit(e) {
    if ((e.code == "ArrowUp") && spirit.y == spiritY) {
        //jump
        velocityY = -10;
    }
}

</script>
</body>
</html>